# 💻 Step 1:  Gaining Passage to the Final Server

🏴‍☠️ You approach Blackbeard’s last citadel—a shared GCP Minecraft server guarded by advanced automation.

To gain entry, you must configure Ansible Automation Platform (AAP) to execute a job to whitelist your Minecraft username, those on the access list can proceed to the puzzle-laden realm inside.

🧩 Your task is to use AAP to update the existing shared GCP Minecraft server’s access list, granting you passage to the final challenge.
![finaltask](/assets/task_4/final_task.png)

Starter code has been provided in the final task directory. You will need to
complete this task in vscode and apply your changes for access to the shared GCP Minecraft server, where the final Minecraft challenge will Start.
![vscode](/assets/task_4/task4-vscode.png)

Note: The GCP Minecraft server is already running and accessible via SSH on port 22.
```
{{ shared_minecraft_instance}}
```
Ansible Automation Platform login details:
```bash
username: <team_name>_admin
Ansible Automation password:{{ ansible_pass }}
```
## 1. Create a new AAP inventory for the shared GCP Minecraft server

<Link href="https://registry.terraform.io/providers/ansible/aap/latest/docs/resources/inventory" target="_blank" rel="noopener noreferrer">ansible/aap/latest/docs/resources/inventory</Link>
 * Hint: you will need your organization id use the locals provided


## 2. Create a new AAP host for the GCP minecraft server set any required variables
<Link href="https://registry.terraform.io/providers/ansible/aap/latest/docs/resources/host" target="_blank" rel="noopener noreferrer">ansible/aap/latest/docs/resources/host</Link>


## 3. Execute the Job Template to update the minecraft server for access using existing job template - minecraft_whitelist
<Link href="https://registry.terraform.io/providers/ansible/aap/latest/docs/resources/job" target="_blank" rel="noopener noreferrer">ansible/aap/latest/docs/resources/job</Link>
* Hint: credentials are preconfigured and using the same credentials as task 3 no changes are required to the AAP job template.

Once you have successfully completed the task, you can verify the Ansible job execution in AAP.
Login to the AAP web console and from the tab **Ansible Automation Platform**, using `<teamname_admin>` and passwword (see AAP login details at the top).
You can see the job status and output in the menu on the left side of the screen. 
**Automation Execution -> Jobs**

* The job template executed successfully in Ansible Automation Platform (AAP), completing the intended task
* The Vault-signed SSH certificate was successfully injected into the execution environment and used to authenticate with the shared GCP Minecraft server
* The debug output from the job execution displays the results of updating the Minecraft server's access list, confirming the changes were applied

![aaprun](/assets/task_4/task4-aap.png)

## 🔍 Did You Get It Right?

<Solution title="Solution: Gain access to the shared GCP Minecraft server using AAP">
```bash
See TA if your stuck and need help.
The GCP server is existing and listening on port 22 for SSH connections.
Hint: The code required for AAP integration is similar to task 3, step 2.
```
</Solution>

## Step 1 Complete

🎉 Congratulations! You’ve now bypassed the fortress gates and stand on the threshold of the ultimate treasure hunt. 

In Step 2, you’ll face a gauntlet of puzzles—some easy, some devilishly complex—but all lead to buried treasure in the Minecraft survival world.

