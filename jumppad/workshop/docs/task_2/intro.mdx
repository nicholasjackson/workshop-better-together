# Task 2 Gain Access to Blackbeards Treasure - Configure Ansible to for SSH key signing


* Part 1: Vault is preconfigured for userpass login with your namespace credentials - Tony (done)
* Part 2: Retrieve approle secret and configure Ansible AAP Vault SSH credentials plugin, test connectivity - Simon (done)
* Part 3: Create machine credentials in Ansible AAP
* Part 4: Retrieve KV secret from Vault using approle. Tony (done)
* Part 5: Complete the challenge in Minecraft to find Blackbeards treasure. unlock the chest and fin Blackbeards treasure

# This is built and ready to move into minecraft instructions

--

## HashiCorp Cloud Platform (HCP) Vault Dedicated
For this lab, we are leveraging a single shared HCP Vault Dedicated with child namespaces precreated and configured for each team.

**Vault Address:** https://skoaap-public-vault-7a278d60.8c03478c.z1.hashicorp.cloud:8200/

## Get AppRole credentials for Ansible Automation Platform (AAP)
AAP natively uses Vault's AppRole Authenication method. The first step would be to receive these credentials so you can configure AAP to interact with Vault.

### Login to HCP Vault using `userpass` authenication method

1. Set environment variable `export VAULT_ADDDR=https://skoaap-public-vault-7a278d60.8c03478c.z1.hashicorp.cloud:8200/`
2. Login to Vault `vault login -namespace=admin -method=userpass username=<team_name> password='<password>'`
3. Test retrieving a secret from Vault's Key-Value Secrets engine `vault kv get -namespace=admin/<team_name> secrets/skofy26`

### Retrieve AAP AppRole Credentials

vault read -namespace=admin/testorgc auth/approle/role/aap/role-id
vault write -namespace=admin/testorgc -force auth/approle/role/aap/secret-id